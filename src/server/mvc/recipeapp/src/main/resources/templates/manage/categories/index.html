<!DOCTYPE html>
<html lang="en" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{shared/layouts/adminLayout}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Category Management</title>
</head>

<body>
    <section layout:fragment="content" class="manager p-4">
        <!-- Card Search -->
        <div class="card border border-slate-300 rounded-md my-4">
            <div class="card-header p-3">
                Category Management
            </div>
            <div class="card-body p-3 border-y border-slate-300">
                Form Search
            </div>
            <div class="card-footer p-3">
                <a th:href="@{/manage/categories/create}"
                    class="p-2 px-4 bg-green-500 text-white rounded-full">Create</a>
            </div>
        </div>

        <!-- Card List -->
        <div class="card border border-slate-300 rounded-md">
            <div class="card-body p-3 border-y border-slate-300">
                <table class="table-auto w-full">
                    <thead>
                        <tr class="*:p-2 *:text-left *:border *:border-slate-300">
                            <th>Name</th>
                            <th>Description</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="category : ${categories}" class="*:p-2 *:text-left *:border *:border-slate-300">
                            <td th:text="${category.name}">Name</td>
                            <td th:text="${category.description}">Description</td>
                            <td>
                                <div class="action flex justify-center items-center gap-3">
                                    <a th:href="@{/manage/categories/edit/{id}(id=${category.id})}"
                                        class="btn btn-sm btn-primary">
                                        <i class="fa-solid fa-edit text-blue-500"></i>
                                    </a>
                                    <a th:href="@{/manage/categories/delete/{id}(id=${category.id})}"
                                        class="btn btn-sm btn-danger">
                                        <i class="fa-solid fa-trash text-red-500"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Popup Message -->
        <div id="popup"
            class="fixed top-[64px] right-[20px] bg-white p-4 rounded-md border border-slate-400 shadow-md z-10 transform translate-x-full transition-transform duration-500 ease-in-out hidden">
            <i th:class="${message.type == 'success'} ? 'fa-solid fa-check-circle text-green-500' : 'fa-solid fa-times-circle text-red-500'"
                class="absolute top-2 right-2"></i>
            <span id="popup-message"></span>
        </div>

        <script th:inline="javascript">
            /*<![CDATA[*/
            document.addEventListener('DOMContentLoaded', function () {
                const message = /*[[${message}]]*/ null;
                if (message !== null && message.content !== null && message.content !== '') {
                    const popup = document.getElementById('popup');
                    const popupMessage = document.getElementById('popup-message');
                    popupMessage.textContent = /*[[${message.content}]]*/ 'Default message';
                    popup.classList.add(/*[[${message.type} == 'success' ? 'text-green-500' : 'text-red-500']]*/ 'text-green-500');
                    popup.classList.remove('hidden', 'translate-x-full');
                    setTimeout(() => {
                        popup.classList.add('translate-x-full');
                        setTimeout(() => {
                            popup.classList.add('hidden');
                        }, 500); // Wait for the transition to complete before hiding
                    }, 3000);
                }
            });
            /*]]>*/
        </script>
    </section>
</body>

</html>